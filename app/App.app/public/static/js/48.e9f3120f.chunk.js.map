{"version":3,"sources":["../../../src/web.ts"],"names":["ua"],"mappings":"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","file":"static/js/48.e9f3120f.chunk.js","sourcesContent":["import { WebPlugin } from '@capacitor/core';\nexport class DeviceWeb extends WebPlugin {\n    async getId() {\n        return {\n            uuid: this.getUid(),\n        };\n    }\n    async getInfo() {\n        if (typeof navigator === 'undefined' || !navigator.userAgent) {\n            throw this.unavailable('Device API not available in this browser');\n        }\n        const ua = navigator.userAgent;\n        const uaFields = this.parseUa(ua);\n        return {\n            model: uaFields.model,\n            platform: 'web',\n            operatingSystem: uaFields.operatingSystem,\n            osVersion: uaFields.osVersion,\n            manufacturer: navigator.vendor,\n            isVirtual: false,\n            webViewVersion: uaFields.browserVersion,\n        };\n    }\n    async getBatteryInfo() {\n        if (typeof navigator === 'undefined' || !navigator.getBattery) {\n            throw this.unavailable('Device API not available in this browser');\n        }\n        let battery = {};\n        try {\n            battery = await navigator.getBattery();\n        }\n        catch (e) {\n            // Let it fail, we don't care\n        }\n        return {\n            batteryLevel: battery.level,\n            isCharging: battery.charging,\n        };\n    }\n    async getLanguageCode() {\n        return {\n            value: navigator.language,\n        };\n    }\n    parseUa(ua) {\n        const uaFields = {};\n        const start = ua.indexOf('(') + 1;\n        let end = ua.indexOf(') AppleWebKit');\n        if (ua.indexOf(') Gecko') !== -1) {\n            end = ua.indexOf(') Gecko');\n        }\n        const fields = ua.substring(start, end);\n        if (ua.indexOf('Android') !== -1) {\n            const tmpFields = fields.replace('; wv', '').split('; ').pop();\n            if (tmpFields) {\n                uaFields.model = tmpFields.split(' Build')[0];\n            }\n            uaFields.osVersion = fields.split('; ')[1];\n        }\n        else {\n            uaFields.model = fields.split('; ')[0];\n            if (typeof navigator !== 'undefined' && navigator.oscpu) {\n                uaFields.osVersion = navigator.oscpu;\n            }\n            else {\n                if (ua.indexOf('Windows') !== -1) {\n                    uaFields.osVersion = fields;\n                }\n                else {\n                    const tmpFields = fields.split('; ').pop();\n                    if (tmpFields) {\n                        const lastParts = tmpFields\n                            .replace(' like Mac OS X', '')\n                            .split(' ');\n                        uaFields.osVersion = lastParts[lastParts.length - 1].replace(/_/g, '.');\n                    }\n                }\n            }\n        }\n        if (/android/i.test(ua)) {\n            uaFields.operatingSystem = 'android';\n        }\n        else if (/iPad|iPhone|iPod/.test(ua) && !window.MSStream) {\n            uaFields.operatingSystem = 'ios';\n        }\n        else if (/Win/.test(ua)) {\n            uaFields.operatingSystem = 'windows';\n        }\n        else if (/Mac/i.test(ua)) {\n            uaFields.operatingSystem = 'mac';\n        }\n        else {\n            uaFields.operatingSystem = 'unknown';\n        }\n        // Check for browsers based on non-standard javascript apis, only not user agent\n        const isFirefox = !!window.InstallTrigger;\n        const isSafari = !!window.ApplePaySession;\n        const isChrome = !!window.chrome;\n        const isEdge = /Edg/.test(ua);\n        const isFirefoxIOS = /FxiOS/.test(ua);\n        const isChromeIOS = /CriOS/.test(ua);\n        const isEdgeIOS = /EdgiOS/.test(ua);\n        // FF and Edge User Agents both end with \"/MAJOR.MINOR\"\n        if (isSafari ||\n            (isChrome && !isEdge) ||\n            isFirefoxIOS ||\n            isChromeIOS ||\n            isEdgeIOS) {\n            // Safari version comes as     \"... Version/MAJOR.MINOR ...\"\n            // Chrome version comes as     \"... Chrome/MAJOR.MINOR ...\"\n            // FirefoxIOS version comes as \"... FxiOS/MAJOR.MINOR ...\"\n            // ChromeIOS version comes as  \"... CriOS/MAJOR.MINOR ...\"\n            let searchWord;\n            if (isFirefoxIOS) {\n                searchWord = 'FxiOS';\n            }\n            else if (isChromeIOS) {\n                searchWord = 'CriOS';\n            }\n            else if (isEdgeIOS) {\n                searchWord = 'EdgiOS';\n            }\n            else if (isSafari) {\n                searchWord = 'Version';\n            }\n            else {\n                searchWord = 'Chrome';\n            }\n            const words = ua.split(' ');\n            for (const word of words) {\n                if (word.includes(searchWord)) {\n                    const version = word.split('/')[1];\n                    uaFields.browserVersion = version;\n                }\n            }\n        }\n        else if (isFirefox || isEdge) {\n            const reverseUA = ua.split('').reverse().join('');\n            const reverseVersion = reverseUA.split('/')[0];\n            const version = reverseVersion.split('').reverse().join('');\n            uaFields.browserVersion = version;\n        }\n        return uaFields;\n    }\n    getUid() {\n        if (typeof window !== 'undefined') {\n            let uid = window.localStorage.getItem('_capuid');\n            if (uid) {\n                return uid;\n            }\n            uid = this.uuid4();\n            window.localStorage.setItem('_capuid', uid);\n            return uid;\n        }\n        return this.uuid4();\n    }\n    uuid4() {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            const r = (Math.random() * 16) | 0, v = c === 'x' ? r : (r & 0x3) | 0x8;\n            return v.toString(16);\n        });\n    }\n}\n//# sourceMappingURL=web.js.map"],"sourceRoot":""}